var h=Object.create;var t=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var a=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var d=(r,e)=>{for(var o in e)t(r,o,{get:e[o],enumerable:!0})},i=(r,e,o,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of a(e))!w.call(r,l)&&l!==o&&t(r,l,{get:()=>e[l],enumerable:!(n=p(e,l))||n.enumerable});return r};var k=(r,e,o)=>(o=r!=null?h(m(r)):{},i(e||!r||!r.__esModule?t(o,"default",{value:r,enumerable:!0}):o,r)),y=r=>i(t({},"__esModule",{value:!0}),r);var $={};d($,{Decompressor:()=>f});module.exports=y($);var c=require("lz4-napi"),u=k(require("oodle")),b=require("snappyjs"),f=class{oodle;xorTable;constructor(e){this.oodle=new u.default.Oodle(e)}decrypt(e,o,n,l){if(l){if(!this.xorTable)throw new Error("Xor key not initialized");this.xor(e,o)}let s;switch(n){case 0:{s=e;break}case 1:{s=(0,c.uncompressSync)(e);break}case 2:{s=(0,b.uncompress)(e);break}case 3:{if(e.length<4)throw new Error(`Invalid oodle packet: size=${e.length}, comp=${n}, opcode=${o}`);s=this.oodle.decode(e.subarray(4),e.readUInt32LE(0));break}default:throw new Error(`Unknown compression: ${n}`)}if(s.length<16)throw new Error(`Invalid packet: size=${s.length}, comp=${n}, opcode=${o}`);return s.subarray(16)}xor(e,o){if(this.xorTable)for(let n=0;n<e.length;n++)e[n]^=this.xorTable[o++%256]}};0&&(module.exports={Decompressor});
