var to=Object.defineProperty;var Ct=Object.getOwnPropertyDescriptor;var Mt=Object.getOwnPropertyNames;var jt=Object.prototype.hasOwnProperty;var Ft=(o,n)=>{for(var e in n)to(o,e,{get:n[e],enumerable:!0})},gt=(o,n,e,_)=>{if(n&&typeof n=="object"||typeof n=="function")for(let u of Mt(n))!jt.call(o,u)&&u!==e&&to(o,u,{get:()=>n[u],enumerable:!(_=Ct(n,u))||_.enumerable});return o};var Wt=o=>gt(to({},"__esModule",{value:!0}),o);var Ks={};Ft(Ks,{LiveLogger:()=>Ir,Logger:()=>On,ReplayLogger:()=>Er});module.exports=Wt(Ks);var Lt=require("tiny-typed-emitter");var a=class{b;o;constructor(n){this.b=n,this.o=0}skip(n=0){this.o+=n}bool(){return this.u8()===1}u8(){return this.b.readUint8(this.o++)}i8(){return this.b.readInt8(this.o++)}u16(){let n=this.b.readUint16LE(this.o);return this.o+=2,n}i16(){let n=this.b.readInt16LE(this.o);return this.o+=2,n}u32(){let n=this.b.readUint32LE(this.o);return this.o+=4,n}i32(){let n=this.b.readInt32LE(this.o);return this.o+=4,n}f32(){let n=this.b.readFloatLE(this.o);return this.o+=4,n}u64(){let n=this.b.readBigUint64LE(this.o);return this.o+=8,n}i64(){let n=this.b.readBigInt64LE(this.o);return this.o+=8,n}string(n){let e=this.u16();if(e<=n){e=e*2;let _=this.b.toString("utf16le",this.o,this.o+e);return this.o+=e,_}return""}bytes(n=0,e,_){if(e&&n>e)return Buffer.alloc(0);_&&(n=n*_);let u=Buffer.from(this.b.subarray(this.o,this.o+n));return this.o+=n,u}array(n,e,_){return _&&n>_?[]:new Array(n).fill(void 0).map(e)}},Zn=class{b;o;constructor(n=65535){this.b=Buffer.allocUnsafe(n),this.o=0}get value(){return this.b.subarray(0,this.o)}skip(n=0){this.o+=n}bool(n=!1){return this.u8(n?1:0),n}u8(n=0){this.b.writeUInt8(n,this.o++)}i8(n=0){this.b.writeInt8(n,this.o++)}u16(n=0){this.o=this.b.writeUInt16LE(n,this.o)}i16(n=0){this.o=this.b.writeInt16LE(n,this.o)}u32(n=0){this.o=this.b.writeUInt32LE(n,this.o)}i32(n=0){this.o=this.b.writeInt32LE(n,this.o)}f32(n=0){this.o=this.b.writeFloatLE(n,this.o)}u64(n=0n){this.o=this.b.writeBigUInt64LE(BigInt(n),this.o)}i64(n=0n){this.o=this.b.writeBigInt64LE(BigInt(n),this.o)}string(n="",e=0){this.u16(n.length),n.length<=e&&(this.o+=this.b.write(n,this.o,"utf16le"))}bytes(n=Buffer.alloc(0),e={}){if(e.maxLen){let _=e.multiplier??1;if(n.length%_)throw new Error(`Error writing bytes, chunkSize should be a multiple of intut value size, got ${n.length}%${_}`);let u=n.length/_;if(u>e.maxLen)throw new Error(`Error writing bytes, input value size exceeded maxLen, got ${u} > ${e.maxLen}`);if(!e.lenType)throw new Error(`Error writing bytes, invalid lenType when writing chunks, got ${e.lenType}`);this[e.lenType](u)}else if(e.length&&n.length!==e.length)throw new Error(`Error writing bytes, input value size doesn't match opts.length, ${n.length} !== ${e.lenType}`);this.o+=n.copy(this.b,this.o)}array(n=[],e,_){if(n===void 0||n.length>e.maxLen){this[e.lenType](0);return}this[e.lenType](n.length),n.forEach(_)}};function A(o){let n={};return n.level=o.u8(),n.id=o.u32(),n.points=o.u16(),n}function io(o){let n=new a(o),e={};return e.abilityDataList=n.array(n.u16(),()=>A(n),100),e}var mo="PKTAbilityChangeNotify",g=15874;function Kr(o){let n={};return n.level=o.u32(),n.featureType=o.u16(),n}function fo(o){let n=new a(o),e={};return e.objectId=n.u64(),e.activeAbilityList=n.array(n.u16(),()=>Kr(n),60),e}var lo="PKTActiveAbilityNotify",W=3507;function co(o){let n=new a(o),e={};return e.objectId=n.u64(),e.addonSkillFeatureList=n.array(n.u16(),()=>{let _={};return _.addonSkillFeatureIdList=n.array(n.u16(),()=>n.u32(),5),_.skillId=n.u32(),_},200),e.addonFeatureIdList=n.bytes(n.u16(),200,4),e}var ko="PKTAddonSkillFeatureChangeNotify",O=40396;function po(o){let n=new a(o),e={};return e.packetResultCode=n.u32(),e.unk1_m=n.bytes(n.u32(),688),e}var vo="PKTAuthTokenResult",xo=9743;function To(o){let n=new a(o),e={};return e.objectId=n.u64(),e.paralyzationMaxPoint=n.u32(),n.skip(1),e.paralyzationPoint=n.u32(),e.type=n.u8(),e}var So="PKTBlockSkillStateNotify",U=43294;function Po(o){let n=new a(o),e={};return e.type=n.u32(),e.targetId=n.u64(),e.sourceId=n.u64(),n.skip(2),e}var bo="PKTCounterAttackNotify",Z=50518;function No(o){let n=new a(o),e={};return e.targetId=n.u64(),e.unk2_m=n.u32(),n.bool()&&(e.damageAttr=n.u8()),e.effectId=n.u32(),e.unk0_m=n.u64(),e.directionYaw=n.u16(),n.bool()&&(e.deathType=n.u8()),e.durabilityDecrement=n.u8(),e.sourceId=n.u64(),n.bool()&&(e.abnormalStatusType=n.u8()),e}var ho="PKTDeathNotify",q=47719;var Ut=[0,31,28,31,30,31,30,31,31,30,31,30,31];function Zt(o){return!(o%4||!(o%100)&&o%400)}function qt(o,n,e){if(o>99){if(o<1752||o==1752&&(n<9||n==9&&e<<14))return!1}else o+=1900;return e>0&&n<=12&&(e<=Ut[n]||e==29&&n==2&&Zt(o))}function Io(o){let n=Number(o&0xffffffffn),e=Number(o>>32n&0xffffffffn),_=n&4095,u=(n&65535)>>12,s=n>>16&31;qt(_,u,s)||(_=u=s=0);let i=n>>21&31,T=n>>26&63,L=e&63,N=e>>6&16383;return i<24&&T<60&&L<60&&N<1e3||(i=24,T=L=N=0),new Date(Date.UTC(_<=99?_+1900:_,u-1,s,i,T,L,N))}function Rr(o){let n=0n;return n|=BigInt(o.getUTCMilliseconds())<<38n,n|=BigInt(o.getUTCSeconds())<<32n,n|=BigInt(o.getUTCMinutes())<<26n,n|=BigInt(o.getUTCHours())<<21n,n|=BigInt(o.getUTCDate())<<16n,n|=BigInt(o.getUTCMonth()+1)<<12n,n|=BigInt(o.getUTCFullYear()<2e3?o.getUTCFullYear()-1900:o.getUTCFullYear()),n}function c(o,n=0){let e=o.u16();return(e&4095)<2079?(o.o-=2,Io(o.i64())):Io(BigInt(e)&0xfffn|0x11000n)}function h(o,n=Io(0x1181fn)){n.getUTCFullYear()>=2079?o.u16(Number(Rr(n)&0xffffn)):o.i64(Rr(n))}function P(o){let n={};return o.bool()&&(n.unk1_0=o.u8()),n.id=o.u32(),n.expireTime=c(o),n.itemTint=o.bytes(o.u16(),5,14),n.unk5=o.u8(),n.level=o.u16(),n.slot=o.u16(),n}function Eo(o){let n=new a(o),e={};return e.unk0=n.u32(),e.equipItemDataList=n.array(n.u16(),()=>P(n),33),e.unk2=n.u32(),e.objectId=n.u64(),e}var Do="PKTEquipChangeNotify",V=37232;function Ko(o){let n=new a(o),e={};return e.objectId=n.u64(),e.equipLifeToolDataList=n.array(n.u16(),()=>P(n),9),e}var Ro="PKTEquipLifeToolChangeNotify",H=36609;function Lo(o){let n=new a(o),e={};return e.stance=n.u8(),e.objectId=n.u64(),n.skip(2),e}var Ao="PKTIdentityStanceChangeNotify",z=13939;function wo(o){let n=new a(o),e={};return e.abilityDataList=n.array(n.u16(),()=>A(n),100),e.struct_137=n.bytes(n.u16(),353,48),e}var Bo="PKTInitAbility",G=37053;function Co(o){let n=new a(o),e={};return e.lostArkDateTime=c(n),e.struct_597=n.string(128),e.unk2=n.u8(),e.struct_31=n.array(n.u16(),()=>{let _={};return _.versionString=n.string(64),_.struct_597=n.string(128),_.struct_580=n.string(32),_},64),e.unk4=n.u32(),e.playerId=n.u64(),e.unk6=n.u64(),e.unk7=n.u32(),e}var Mo="PKTInitEnv",Y=15335;function k(o){let n={};return n.sourceId=o.u64(),n.statusEffectId=o.u32(),n.totalTime=o.f32(),n.effectInstanceId=o.u32(),n.endTick=o.u64(),n.struct_443=o.bytes(o.u16(),8,7),o.bool()&&(n.unk7_0=o.u64()),n.occurTime=c(o),n.skillLevel=o.u8(),o.bool()&&(n.value=o.bytes(16)),n.stackCount=o.u8(),n}function Vt(o){if(o.length===0)return 0n;if(o.length>8)throw new Error("Value is too large");let n=Buffer.alloc(8);return o.copy(n),n.readBigInt64LE()}function r(o,n=0){let e=o.u8(),_=o.bytes(e>>1&7),u=Vt(_)<<4n|BigInt(e>>4);return e&1?-u:u}function d(o,n=0n){let e=Buffer.alloc(8),_=n<0n;e.writeBigInt64LE((_?-n:n)>>4n);let u=0;for(let[s,i]of e.entries())i!=0&&(u=s+1);if(u>7)throw new Error("Value is too large");o.u8(Number((_?-n:n)&0xfn)<<4|(u&7)<<1|(_?1:0)),o.bytes(e.subarray(0,u),{length:u})}function w(o){let n={};return n.unk0=o.u16(),n.unk1=r(o),n.unk2=r(o),n.unk3=o.u8(),n.unk4=o.u8(),n.unk5=o.u8(),n.unk6=o.u64(),n}function Fo(o){let n=new a(o),e={};return e.unk0=n.u64(),e.name=n.string(20),e.gearLevel=n.f32(),e.unk3=n.u8(),e.unk4=n.u8(),e.unk5=n.u32(),e.unk6=n.u8(),e.unk7=n.u8(),e.statusEffectDatas=n.array(n.u16(),()=>k(n),80),e.unk9=n.u16(),e.unk10=n.u8(),e.unk11=n.u8(),e.struct_368=n.string(7),e.unk13=n.u32(),e.struct_105=n.bytes(n.u16(),64),e.unk15=n.u8(),e.unk16=n.u64(),e.unk17=n.bytes(35),e.unk18=n.u8(),e.struct_226=n.bytes(n.u16(),3,17),e.unk20=n.u64(),e.unk21=n.u32(),e.unk22=n.u8(),e.classId=n.u16(),e.unk24=n.bytes(120),e.unk25=n.u64(),e.unk26=n.u8(),e.unk27=n.u8(),e.unk28=n.u8(),e.unk29=n.bytes(25),e.unk30=n.u8(),e.unk31=n.u64(),n.bool()&&(e.unk33_0=n.u32()),e.unk34=n.u32(),e.unk35=n.u8(),e.level=n.u16(),e.unk37=n.u8(),e.unk38=n.u32(),e.unk39=n.u8(),e.unk40=n.u16(),e.unk41=n.u32(),e.unk42=n.u8(),e.unk43=n.u32(),e.playerId=n.u64(),e.unk45=n.u32(),e.characterId=n.u64(),e.unk47=n.u16(),e.unk48=n.u8(),e.unk49=n.u16(),e.unk50=n.u32(),e.unk51=n.u32(),e.unk52=n.u8(),e.periodUpdateStatDataList=n.array(n.u16(),()=>w(n),5),e.unk54=n.u8(),e.struct_342=n.bytes(n.u16(),104,30),e.unk56=n.u32(),e.statPair=n.array(n.u16(),()=>{let _={};return _.statType=n.u8(),_.value=r(n),_},153),e}var go="PKTInitPC",$=54555;function Lr(o){let n={},e=o.u16();return e===1&&(n.unk1_0=o.bytes(e)),n}function Ar(o){let n={};return n.unk0=o.u8(),n.unk1=o.u8(),n.unk2=o.u8(),n.unk3=o.u8(),n.unk4=o.u32(),n.unk5=o.u32(),n.struct_145=Lr(o),n.struct_146=o.bytes(o.u16(),3,9),n}function wr(o){let n={};return n.struct_393=o.bytes(o.u16(),2,10),n.unk1=o.u32(),n.struct_147=o.bytes(o.u16(),10,9),n.struct_237=o.bytes(o.u16(),10,18),n.unk4=o.u32(),n.struct_235=o.array(o.u16(),()=>Ar(o),3),n.unk6=o.u32(),n.unk7=o.u32(),n.unk8=o.u8(),n.unk9=o.u32(),n.struct_258=o.bytes(o.u16(),2,9),n.unk11=o.u32(),n.unk12=o.u16(),n.unk13=o.u64(),n}function Br(o){let n={};return n.struct_99=o.bytes(o.u32(),51),n.unk1=o.u8(),n.unk2=o.bytes(3),n.unk3=o.u8(),n.unk4=o.u8(),n.unk5=o.u16(),n.unk6=o.u16(),n.unk7=o.u16(),n}function Cr(o){let n={};return o.bool()&&(n.struct_751=Br(o)),n.unk2=o.bytes(o.u16(),7),n.unk3=o.bytes(o.u16(),7),n.unk4=o.u8(),n}function Mr(o){let n={};return n.unk0=o.u32(),n.unk1=o.u32(),o.bool()&&(n.unk3_0=o.bytes(9)),n.unk4=o.u32(),n.struct_271=o.bytes(o.u16(),10,29),n.unk6=o.u8(),n.unk7=o.u32(),o.bool()&&(n.unk1_0=o.u32(),n.struct_190=o.bytes(o.u16(),5,30),n.unk1_2=o.u32()),o.bool()&&(n.struct_231=o.bytes(o.u16(),2,32)),n.struct_438=o.bytes(o.u16(),3,10),n.struct_269=o.bytes(o.u16(),3,21),n.itemTint=o.bytes(o.u16(),5,14),n.unk14=o.u32(),o.bool()&&(n.unk16_0=o.bytes(10)),o.bool()&&(n.struct_792=Cr(o)),n.struct_495=o.bytes(o.u16(),3,7),n.unk20=o.u32(),n}function Vn(o){let n={};return n.isDead=o.bool(),n.npcId=o.u32(),n}function Fr(o){let n={};return n.unk0=o.u8(),n.bossKillDataList=o.array(o.u16(),()=>Vn(o),3),n.struct_1=o.array(o.u16(),()=>{let e={};return e.unk1_0_0=o.u32(),e.struct_524=o.bytes(o.u16(),10),e},3),n.unk3=o.u8(),n.unk4=o.u32(),n}function gr(o){let n={};return n.unk0=o.u8(),n.struct_495=o.bytes(o.u16(),3,7),n.unk2=o.u8(),n.unk3=o.u8(),n.struct_234=o.bytes(o.u16(),5,7),n.struct_24=o.array(o.u16(),()=>{let e={};return e.unk1_0_0=o.u8(),e.unk1_0_1=o.u16(),e.struct_233=o.string(2),e},20),n}function Wr(o){let n={},e=o.u8();return e===1&&(n.struct_667=wr(o)),e===2&&(n.unk2_0=o.u8(),n.struct_2=o.array(o.u16(),()=>{let _={};return _.struct_524=o.bytes(o.u16(),10),_.unk1_0_1=o.u32(),_.unk1_0_2=o.u8(),_.unk1_0_3=o.u8(),_},3),n.struct_134=o.bytes(o.u16(),3,6)),e===3&&(n.unk3_0=o.bytes(26)),e===4&&(n.unk4_0=o.bytes(o.u16(),10,13),n.unk4_1=o.bytes(o.u16(),10,13),n.unk4_2=o.u32()),e===5&&(n.struct_666=Mr(o)),e===6&&(n.struct_612=Fr(o)),e===7&&(n.unk7_0=o.bytes(9)),e===8&&(n.struct_659=gr(o)),e===9&&(n.unk9_0=o.u8()),n}function Or(o){let n={};return o.u32()>0&&(n.serialNumber=o.u64(),n.id=o.u32(),n.level=o.u16(),n.slot=o.u16(),n.durability=o.u32(),n.unk1_6_m=o.u32(),n.flag=o.u32(),n.expireTime=c(o),n.lockUpdateTime=c(o),o.bool()&&(n.unk1_10_0=o.bytes(9)),n.unk1_11=o.u8(),n.unk1_12=o.u8(),n.unk1_13=o.u32(),n.struct_567=Wr(o),n.unk1_15=o.u32()),n}function Wo(o){let n=new a(o),e={};return e.itemDataList=n.array(n.u16(),()=>Or(n),80),e.storageType=n.u8(),e}var Oo="PKTInitItem",J=31937;function Ur(o){let n={};return n.unk0=o.u32(),o.bool()&&(n.unk2_0=o.u32()),n.unk3=o.u32(),o.bool()&&(n.unk5_0=o.bytes(9)),n.unk6=o.u32(),n}function Uo(o){let n=new a(o),e={};return e.unk0=n.u8(),e.struct_226=n.bytes(n.u16(),3,17),e.unk2=n.u64(),e.struct_422=n.array(n.u16(),()=>Ur(n),300),e.statPair=n.array(n.u16(),()=>{let _={};return _.statType=n.u8(),_.value=r(n),_},153),e.unk5=n.u32(),e.unk6=n.u8(),e.statusEffectDatas=n.array(n.u16(),()=>k(n),80),e.unk8=n.u64(),e.struct_137=n.bytes(n.u16(),353,48),e.addonFeatureIdList=n.bytes(n.u16(),200,4),e.unk11=n.u8(),n.bool()&&(e.unk13_0=n.u32()),e.abilityDataList=n.array(n.u16(),()=>A(n),100),e.struct_342=n.bytes(n.u16(),104,30),e.addonSkillFeatureList=n.array(n.u16(),()=>{let _={};return _.addonSkillFeatureIdList=n.array(n.u16(),()=>n.u32(),5),_.skillId=n.u32(),_},200),e}var Zo="PKTInitLocal",Q=12070;function qo(o){let n=new a(o),e={};return e.account_CharacterId1=n.u64(),e.serverAddr=n.string(256),e.account_CharacterId2=n.u64(),e.unk3=n.u32(),e}var Vo="PKTMigrationExecute",X=44024;function Zr(o){let n={};return n.equipItemDataList=o.array(o.u16(),()=>P(o),33),n.lostArkString=o.string(20),n.lookData=o.bytes(o.u32(),512),n.unk3=o.u8(),n.unk4=o.u64(),n.unk5=o.u8(),n.unk6=o.u64(),n.unk7=o.u8(),n.unk8=o.u16(),n}function m(o,n=0){return o.u16()*(2*Math.PI)/65536}function S(o,n=0){o.u16(Math.round(n*65536/(2*Math.PI))%65536)}function Ho(o){return o>>20===1?-((~o>>>0)+1&2097151):o}function t(o,n=0){let e=o.u64();return{x:Ho(Number(e&0x1fffffn)),y:Ho(Number(e>>21n&0x1fffffn)),z:Ho(Number(e>>42n&0x1fffffn))}}function l(o,n={x:0,y:0,z:0}){o.u64(BigInt(Math.round(n.x??0)>>>0&2097151)|BigInt(Math.round(n.y??0)>>>0&2097151)<<21n|BigInt(Math.round(n.z??0)>>>0&2097151)<<42n)}function Hn(o){let n={};return n.statusEffectDatas=o.array(o.u16(),()=>k(o),80),o.bool()&&(n.unk2_0=o.u8()),o.bool()&&(n.balanceLevel=o.u16()),n.periodUpdateStatDataList=o.array(o.u16(),()=>w(o),5),o.bool()&&(n.unk7_0=o.u32()),n.unk8=o.u8(),o.bool()&&(n.unk10_0=o.u8()),o.bool()&&(n.unk12_0=o.u32()),o.bool()&&(n.struct_337=o.bytes(o.u16(),11,9)),o.bool()&&(n.unk16_0=o.u8()),o.bool()&&(n.transitIndex=o.u32()),n.typeId=o.u32(),o.bool()&&(n.unk21_0=o.u32()),n.unk22=o.u8(),o.bool()&&(n.unk24_0=o.u32()),n.unk25=o.u8(),n.unk26=o.u8(),n.directionYaw=m(o),n.objectId=o.u64(),o.bool()&&(n.unk30_0=o.u8()),o.bool()&&(n.unk32_0=o.u8()),o.bool()&&(n.unk34_0=o.u8()),n.unk35=o.u8(),o.bool()&&(n.unk37_0=o.u64()),n.position=t(o),n.spawnIndex=o.u32(),o.bool()&&(n.unk41_0=o.u8()),o.bool()&&(n.struct_735=Zr(o)),n.unk44=o.u8(),o.bool()&&(n.unk46_0=o.u16()),o.bool()&&(n.struct_270=o.bytes(o.u16(),12,12)),n.statPair=o.array(o.u16(),()=>{let e={};return e.statType=o.u8(),e.value=r(o),e},153),n.level=o.u16(),n}function zo(o){let n=new a(o),e={};return e.unk0=n.u8(),n.bool()&&(e.unk1_0=n.string(20),e.unk1_1=n.string(20)),e.npcStruct=Hn(n),n.bool()&&(e.unk4_0=n.u8()),n.bool()&&(e.unk6_0=n.u64()),e}var Go="PKTNewNpc",y=17051;function Yo(o){let n=new a(o),e={};return e.npcData=Hn(n),n.skip(12),e.ownerId=n.u64(),n.skip(23),e.publishReason=n.u8(),e}var $o="PKTNewNpcSummon",nn=9395;function Vr(o){let n={};return n.unk0=o.u32(),o.bool()&&(n.unk2_0=o.bytes(12)),n.unk3=o.u32(),n.unk4=o.bytes(12),n}function Hr(o){let n={};return o.bool()&&(n.grabbedData=o.bytes(12)),n.guildName=o.string(20),n.characterId=o.u64(),n.avatarHide=o.u8(),n.position=t(o),n.unk7_m=o.u32(),n.level=o.u16(),n.unk4_m=o.u32(),n.heading=m(o),n.worldId=o.u8(),n.addonSkillFeatureList=o.array(o.u16(),()=>{let e={};return e.addonSkillFeatureIdList=o.array(o.u16(),()=>o.u32(),5),e.skillId=o.u32(),e},200),n.guildId=o.u64(),n.avgItemLevel=o.f32(),n.equipLifeToolDataList=o.array(o.u16(),()=>P(o),9),n.unk15=o.u64(),n.name=o.string(20),n.addonFeatureIdList=o.bytes(o.u16(),200,4),n.statusEffectDatas=o.array(o.u16(),()=>k(o),80),n.statPair=o.array(o.u16(),()=>{let e={};return e.statType=o.u8(),e.value=r(o),e},153),n.unk23_m=o.u8(),n.secondHonorTitleId=o.u16(),n.unk0_m=o.bytes(5),n.unk23=o.u32(),n.unk1_m=o.u8(),n.unk45_m=o.u32(),n.playerId=o.u64(),n.lookData=o.bytes(o.u32(),512),n.unk5_m=o.u32(),n.firstHonorTitleId=o.u16(),n.periodUpdateStatDataList=o.array(o.u16(),()=>w(o),5),n.unk31=o.u8(),n.unk2_m=o.u8(),n.unk33=o.u32(),n.unk17_m=o.u8(),n.equipItemDataList=o.array(o.u16(),()=>P(o),33),n.unk36=o.u32(),n.rvRLevel=o.u16(),n.maxItemLevel=o.f32(),n.unk25_m=o.u8(),n.petId=o.u32(),n.unk32_m=o.u8(),n.identityData=o.bytes(25),n.unk29_m=o.u8(),n.unk44=o.u8(),n.classId=o.u16(),n.unk46=o.u8(),n}function Jo(o){let n=new a(o),e={};return n.bool()&&(e.unk5_0_m=n.bytes(20)),n.bool()&&(e.unk1_0=n.u64(),e.unk1_1=n.u32(),e.itemTint=n.bytes(n.u16(),5,14)),n.bool()&&(e.unk4_0_m=n.bytes(12)),e.unk0_m=n.u8(),n.bool()&&(e.trackMoveInfo=Vr(n)),n.bool()&&(e.unk3_0_m=n.u32()),e.unk2_m=n.u8(),e.pcStruct=Hr(n),n.bool()&&(e.struct_61=n.array(n.u16(),()=>{let _={};return _.itemTint=n.bytes(n.u16(),5,14),_.unk1_0_1=n.u32(),_.unk1_0_2=n.u64(),_},5)),e}var Qo="PKTNewPC",on=7231;function B(o,n=0){return{first:o.u16(),second:o.u16(),third:o.u16()}}function zn(o,n){o.u16(n.first),o.u16(n.second),o.u16(n.third)}function C(o,n=0){return{first:o.u8(),second:o.u8(),third:o.u8()}}function Gn(o,n){o.u8(n.first),o.u8(n.second),o.u8(n.third)}function zr(o){let n={};return n.unk0=o.u32(),n.tripodLevel=B(o),n.chainSkillEffect=o.u32(),n.unk3=o.u32(),n.unk4=o.u64(),n.unk5=o.u32(),n.ownerId=o.u64(),n.unk7=o.u8(),n.unk8=o.u16(),n.skillEffect=o.u32(),o.bool()&&(n.struct_337=o.bytes(o.u16(),11,9)),n.skillId=o.u32(),n.tripodIndex=C(o),n.projectileId=o.u64(),n.skillLevel=o.u8(),n.targetObjectId=o.u64(),n.unk17=o.u16(),n.unk18=o.u8(),o.bool()&&(n.unk20_0=o.u32()),o.bool()&&(n.unk22_0=o.u64()),n.unk23=o.u64(),n}function ne(o){let n=new a(o),e={};return e.projectileInfo=zr(n),e}var oe="PKTNewProjectile",en=1647;function Gr(o){let n={};return n.ownerId=o.u64(),n.skillId=o.u32(),n.position=t(o),n.unk3=o.u16(),n.unk4=o.u32(),n.unk5=o.u8(),n.skillEffect=o.u32(),n.objectId=o.u64(),n.unk8=o.u32(),n.unk9=o.u8(),n.unk10=o.u32(),n.unk11=o.u8(),o.bool()&&(n.struct_337=o.bytes(o.u16(),11,9)),n}function ee(o){let n=new a(o),e={};return e.unk0=n.u8(),e.trapData=Gr(n),e.unk2=n.u8(),e}var _e="PKTNewTrap",_n=10128;function ae(o){let n=new a(o),e={};return e.paralyzationPoint=n.u32(),e.decreasePoint=n.u32(),n.skip(1),e.noHitCheckTime=n.u32(),n.skip(1),e.enable=n.bool(),e.objectId=n.u64(),e.hitCheckTime=n.u32(),e.paralyzationMaxPoint=n.u32(),e}var ue="PKTParalyzationStateNotify",an=2363;function Yr(o){let n={};return n.unk0=o.u8(),n.zoneInstId=o.u64(),n.name=o.string(20),n.characterLevel=o.u16(),n.maxHp=r(o),n.gearLevel=o.f32(),n.characterId=o.u64(),n.position=t(o),n.auths=o.u8(),n.unk9=o.u8(),n.curHp=r(o),n.worldId=o.u8(),n.unk12=o.u8(),n.unk13=o.u8(),n.unk14=o.u8(),n.partyMemberNumber=o.u8(),n.zoneId=o.u32(),n.unk17=o.u16(),n.transitIndex=o.u32(),n.classId=o.u16(),n}function re(o){let n=new a(o),e={};return e.partyInstanceId=n.u32(),e.raidInstanceId=n.u32(),e.partyLootType=n.u8(),e.lootGrade=n.u32(),e.partyType=n.u8(),e.memberDatas=n.array(n.u16(),()=>Yr(n),40),e}var te="PKTPartyInfo",un=941;function se(o){let n=new a(o),e={};return e.partyInstanceId=n.u32(),e.partyLeaveType=n.u8(),e.name=n.string(20),e}var ie="PKTPartyLeaveResult",rn=28645;function me(o){let n=new a(o),e={};return e.unk0_m=n.u8(),e.objectId=n.u64(),e.passiveStatusEffectList=n.array(n.u16(),()=>n.u32(),10),e}var de="PKTPartyPassiveStatusEffectAddNotify",tn=44618;function fe(o){let n=new a(o),e={};return e.objectId=n.u64(),e.passiveStatusEffectList=n.array(n.u16(),()=>n.u32(),10),e}var le="PKTPartyPassiveStatusEffectRemoveNotify",sn=21010;function ce(o){let n=new a(o),e={};return e.unk0=n.u64(),e.characterId=n.u64(),e.playerIdOnRefresh=n.u64(),e.unk3=n.u8(),e.statusEffectDatas=n.array(n.u16(),()=>k(n),80),e}var ke="PKTPartyStatusEffectAddNotify",mn=29227;function pe(o){let n=new a(o),e={};return e.characterId=n.u64(),e.statusEffectIds=n.array(n.u16(),()=>n.u32(),80),e.reason=n.u8(),e.unk3=n.u64(),e}var ve="PKTPartyStatusEffectRemoveNotify",dn=52833;function xe(o){let n=new a(o),e={};return n.skip(1),e.raidInstanceId=n.u32(),n.skip(21),e.partyInstanceId=n.u32(),e.characterId=n.u64(),n.skip(4),e}var Te="PKTPartyStatusEffectResultNotify",fn=58067;function Se(o){let n=new a(o),e={};return e.passiveStatusEffectList=n.array(n.u16(),()=>n.u32(),10),e}var Pe="PKTPassiveStatusEffectAddNotify",ln=50673;function be(o){let n=new a(o),e={};return e.passiveStatusEffectList=n.array(n.u16(),()=>n.u32(),10),e}var Ne="PKTPassiveStatusEffectRemoveNotify",cn=5480;function he(o){let n=new a(o),e={};return e.initBraveHeartCount=n.u8(),e.unk0_m=n.bool(),e.unk4_m=n.u64(),e.unk5_m=n.u64(),e.raidResult=n.u8(),e.unk1_m=n.bool(),e.startTick=n.u64(),e.unk6_m=n.u64(),e.unk11_m=n.bool(),e.totalTime=n.u64(),e.bossKillDataList=n.array(n.u16(),()=>Vn(n),3),e.braveHeartCount=n.u8(),e.raidId=n.u32(),e.endTick=n.u64(),e}var Ie="PKTRaidBegin",kn=26077;function Ee(o){let n=new a(o),e={};return n.skip(1),e.typeId=n.u32(),n.skip(2),e}var De="PKTRaidBossKillNotify",pn=33189;function Ke(o){let n=new a(o),e={};return e.unk0=n.u64(),e.unk1=n.u64(),e.unk2=n.u8(),e.unk3=n.u64(),e.unk4=n.u8(),e.struct_52=n.array(n.u16(),()=>{let _={};return _.unk1_0_0=r(n),_.unk1_0_1=r(n),_.struct_530=n.bytes(n.u16(),3),_.unk1_0_3=n.u32(),_},3),e.raidResult=n.u8(),e.unk7=n.u64(),e}var Re="PKTRaidResult",vn=29676;function $r(o){let n={};return n.objectId=o.u64(),n.unpublishReason=o.u8(),n}function Le(o){let n=new a(o),e={};return e.unpublishedObjects=n.array(n.u16(),()=>$r(n),200),e}var Ae="PKTRemoveObject",xn=36542;function we(o){let n=new a(o),e={};return n.skip(1),e.skillId=n.u32(),e.newDirectionYaw=m(n),e.cancelReason=n.u8(),e.caster=n.u64(),n.skip(1),e.newPosition=t(n),e}var Be="PKTSkillCancelNotify",Tn=54544;function Ce(o){let n=new a(o),e={};return n.skip(1),e.skillId=n.u32(),n.skip(2),e.caster=n.u64(),e.skillLevel=n.u8(),e}var Me="PKTSkillCastNotify",Sn=30918;function Yn(o,n=0){let e={},_=o.u8();return _&1&&(e.moveTime=o.u32()),_&2&&(e.standUpTime=o.u32()),_&4&&(e.downTime=o.u32()),_&8&&(e.freezeTime=o.u32()),_&16&&(e.moveHeight=o.u32()),_&32&&(e.farmostDist=o.u32()),_&64&&(e.flag40=o.bytes(o.u16(),6)),e}function Jr(o,n){let e=(n.moveTime===void 0?0:1)|(n.standUpTime===void 0?0:2)|(n.downTime===void 0?0:4)|(n.freezeTime===void 0?0:8)|(n.moveHeight===void 0?0:16)|(n.farmostDist===void 0?0:32)|(n.flag40===void 0?0:64);o.u8(e),e&1&&o.u32(n.moveTime),e&2&&o.u32(n.standUpTime),e&4&&o.u32(n.downTime),e&8&&o.u32(n.freezeTime),e&16&&o.u32(n.moveHeight),e&32&&o.u32(n.farmostDist),e&64&&o.bytes(n.flag40,{maxLen:6,lenType:"u16"})}function $n(o){let n={};return n.unk3_m=o.u16(),n.damageType=o.u8(),n.maxHp=r(o),n.modifier=o.u8(),o.bool()&&(n.damageAttr=o.u8()),n.curHp=r(o),n.damage=r(o),n.targetId=o.u64(),n}function yr(o){let n={};return n.skillMoveOptionData=Yn(o),n.unk8_m=o.u16(),n.position=t(o),n.unk4_m=o.u16(),n.unk1_m=o.u8(),n.unk3_m=o.u16(),n.destination=t(o),n.skillDamageEvent=$n(o),n.unk2_m=o.u64(),n}function je(o){let n=new a(o),e={};return e.unk2_m=n.u32(),e.unk1_m=n.u8(),e.skillDamageAbnormalMoveEvents=n.array(n.u16(),()=>yr(n),50),e.sourceId=n.u64(),e.skillEffectId=n.u32(),e.skillId=n.u32(),e}var Fe="PKTSkillDamageAbnormalMoveNotify",Pn=24311;function ge(o){let n=new a(o),e={};return n.bool()&&(e.unk1_0=n.u32()),n.bool()&&(e.skillEffectId=n.u32()),e.sourceId=n.u64(),e.skillLevel=n.u8(),e.skillId=n.u32(),e.skillDamageEvents=n.array(n.u16(),()=>$n(n),50),e}var We="PKTSkillDamageNotify",bn=28204;function Oe(o){let n=new a(o),e={};return e.stage=n.u8(),n.skip(4),e.skillId=n.u32(),n.skip(16),e.sourceId=n.u64(),n.skip(19),e}var Ue="PKTSkillStageNotify",Nn=18388;function Jn(o,n=0){let e={},_=o.u8();return _&1&&(e.layerIndex=o.u8()),_&2&&(e.startStageIndex=o.u8()),_&4&&(e.transitIndex=o.u32()),_&8&&(e.stageStartTime=o.u32()),_&16&&(e.farmostDistance=o.u32()),_&32&&(e.tripodIndex=C(o)),_&64&&(e.tripodLevel=B(o)),e}function nt(o,n){let e=(n.layerIndex===void 0?0:1)|(n.startStageIndex===void 0?0:2)|(n.transitIndex===void 0?0:4)|(n.stageStartTime===void 0?0:8)|(n.farmostDistance===void 0?0:16)|(n.tripodIndex===void 0?0:32)|(n.tripodLevel===void 0?0:64);o.u8(e),e&1&&o.u8(n.layerIndex),e&2&&o.u8(n.startStageIndex),e&4&&o.u32(n.transitIndex),e&8&&o.u32(n.stageStartTime),e&16&&o.u32(n.farmostDistance),e&32&&Gn(o,n.tripodIndex),e&64&&zn(o,n.tripodLevel)}function Ze(o){let n=new a(o),e={};return n.bool()&&(e.pitchRotation=m(n)),e.newDirectionYaw=m(n),e.curPosition=t(n),e.sourceId=n.u64(),n.bool()&&(e.unk1_m=n.u32()),e.curDirectionYaw=m(n),e.skillId=n.u32(),e.skillLevel=n.u8(),e.skillOptionData=Jn(n),e.aimTargetPosition=t(n),e.newPosition=t(n),n.bool()&&(e.aiStateId=n.u32()),e}var qe="PKTSkillStartNotify",hn=12220;function Ve(o){let n=new a(o),e={};return e.objectId=n.u64(),e.unk1=n.array(n.u16(),()=>{let _={};return _.statType=n.u8(),_.value=r(n),_},153),e.unk2=n.u8(),e.unk3=n.array(n.u16(),()=>{let _={};return _.statType=n.u8(),_.value=r(n),_},153),n.bool()&&(e.unk5_0=n.u32()),e}var He="PKTStatChangeOriginNotify",ze=26564;function Ge(o){let n=new a(o),e={};return e.objectId=n.u64(),e.unk1=n.u64(),n.bool()&&(e.unk3_0=n.u64()),e.new=n.bool(),e.statusEffectData=k(n),e}var Ye="PKTStatusEffectAddNotify",In=50563;function $e(o){let n=new a(o),e={};return e.reason=n.u8(),e.objectId=n.u64(),e.statusEffectIds=n.array(n.u16(),()=>n.u32(),80),e}var Je="PKTStatusEffectRemoveNotify",En=39777;function Qe(o){let n=new a(o),e={};return e.targetId=n.u64(),e.expirationTick=n.u64(),n.skip(1),e.effectInstanceId=n.u32(),n.skip(1),e}var Xe="PKTStatusEffectDurationNotify",Dn=50833;function ye(o){let n=new a(o),e={};return e.value=n.u32(),n.skip(4),e.objectId=n.u64(),n.skip(1),e.characterId=n.u64(),e.effectInstanceId=n.u32(),e}var n_="PKTStatusEffectSyncDataNotify",Kn=25745;function o_(o){let n=new a(o),e={};return e.unk2_m=n.bool(),n.skip(1),e.step=n.u32(),e.triggerId=n.u32(),e}var e_="PKTTriggerBossBattleStatus",Rn=55703;function __(o){let n=new a(o),e={};return e.involvedPCs=n.array(n.u16(),()=>n.u64(),40),e.triggerId=n.u32(),e.unk0_m=n.u32(),e.packetResultCode=n.u32(),e}var a_="PKTTriggerFinishNotify",Ln=33396;function u_(o){let n=new a(o),e={};return e.involvedPCs=n.array(n.u16(),()=>n.u64(),40),e.triggerSignalType=n.u32(),e.triggerId=n.u32(),e.sourceId=n.u64(),e}var r_="PKTTriggerStartNotify",An=40913;function t_(o){let n=new a(o),e={};return e.unk0_m=n.u32(),e.position=n.u64(),e.maxHp=r(n),e.curHp=r(n),e.characterId=n.u64(),e.statusEffectDatas=n.array(n.u16(),()=>k(n),80),e}var s_="PKTTroopMemberUpdateMinNotify",wn=16583;function i_(o){let n=new a(o),e={};return n.skip(2),e.identityGauge1=n.u32(),e.identityGauge2=n.u32(),e.identityGauge3=n.u32(),e.playerId=n.u64(),e}var m_="PKTIdentityGaugeChangeNotify",Bn=1029;function d_(o){let n=new a(o),e={};return e.firstPCEnterTick=n.u64(),e.zoneInstId=n.u64(),e.loadComplete=n.bool(),e.totalMembers=n.array(n.u16(),()=>n.u64(),40),e.zoneId=n.u32(),e.zoneLevel=n.u8(),e.completeMembers=n.array(n.u16(),()=>n.u64(),40),e}var f_="PKTZoneMemberLoadStatusNotify",Cn=25608;function l_(o){let n=new a(o),e={};return e.objectId=n.u64(),n.skip(3),e}var c_="PKTZoneObjectUnpublishNotify",Mn=51409;function et(o){let n={};return n.target=o.u8(),o.skip(4),n.instanceId=o.u32(),n.id=o.u32(),n.stackCount=o.u8(),n}function k_(o){let n=new a(o),e={};return e.zoneStatusEffectDataList=n.array(n.u16(),()=>et(n),4),e}var p_="PKTZoneStatusEffectAddNotify",jn=16635;function v_(o){let n=new a(o),e={};return e.statusEffectId=n.u32(),n.skip(2),e}var x_="PKTZoneStatusEffectRemoveNotify",Fn=43975;var T_=new Map([[g,[mo,io]],[W,[lo,fo]],[O,[ko,co]],[xo,[vo,po]],[U,[So,To]],[Z,[bo,Po]],[q,[ho,No]],[V,[Do,Eo]],[H,[Ro,Ko]],[z,[Ao,Lo]],[G,[Bo,wo]],[Y,[Mo,Co]],[$,[go,Fo]],[J,[Oo,Wo]],[Q,[Zo,Uo]],[X,[Vo,qo]],[y,[Go,zo]],[nn,[$o,Yo]],[on,[Qo,Jo]],[en,[oe,ne]],[_n,[_e,ee]],[an,[ue,ae]],[un,[te,re]],[rn,[ie,se]],[tn,[de,me]],[sn,[le,fe]],[mn,[ke,ce]],[dn,[ve,pe]],[fn,[Te,xe]],[ln,[Pe,Se]],[cn,[Ne,be]],[kn,[Ie,he]],[pn,[De,Ee]],[vn,[Re,Ke]],[xn,[Ae,Le]],[Tn,[Be,we]],[Sn,[Me,Ce]],[Pn,[Fe,je]],[bn,[We,ge]],[Nn,[Ue,Oe]],[hn,[qe,Ze]],[ze,[He,Ve]],[In,[Ye,Ge]],[En,[Je,$e]],[Dn,[Xe,Qe]],[Kn,[n_,ye]],[Rn,[e_,o_]],[Ln,[a_,__]],[An,[r_,u_]],[wn,[s_,t_]],[Bn,[m_,i_]],[Cn,[f_,d_]],[Mn,[c_,l_]],[jn,[p_,k_]],[Fn,[x_,v_]]]);var at=new Map([[g,[0]],[W,[1]],[O,[2]],[U,[4]],[Z,[5]],[q,[6]],[G,[7]],[Y,[8]],[$,[9]],[Q,[10]],[X,[11]],[y,[12]],[nn,[13]],[on,[14]],[en,[15]],[an,[16]],[un,[17]],[rn,[18]],[tn,[19]],[sn,[20]],[mn,[21]],[dn,[22]],[fn,[23]],[ln,[24]],[cn,[25]],[pn,[26]],[vn,[27]],[xn,[28]],[Pn,[29]],[bn,[30]],[Nn,[31]],[hn,[32]],[In,[34]],[En,[35]],[Dn,[36]],[Kn,[37]],[Rn,[38]],[Ln,[39]],[An,[40]],[wn,[41]],[Bn,[42]],[Mn,[43]],[jn,[44]],[Fn,[45]],[Sn,[46]],[z,[47]],[V,[48]],[H,[49]],[J,[50]],[kn,[52]],[Cn,[51]],[_n,[53]],[Tn,[54]]]);function M(o,n){let e={};return e.points=o.u16(),e.id=o.u32(),e.level=o.u8(),e}function j(o,n){o.u16(n.points),o.u32(n.id),o.u8(n.level)}function P_(o,n){let e={};return e.abilityDataList=o.array(o.u16(),()=>M(o,n),100),e}function b_(o,n){o.array(n.abilityDataList,{maxLen:100,lenType:"u16"},e=>{j(o,e)})}var N_="AbilityChangeNotify";function ut(o,n){let e={};return e.featureType=o.u16(),e.level=o.u32(),e}function rt(o,n){o.u16(n.featureType),o.u32(n.level)}function h_(o,n){let e={};return e.activeAbilityList=o.array(o.u16(),()=>ut(o,n),60),e.objectId=o.u64(),e}function I_(o,n){o.array(n.activeAbilityList,{maxLen:60,lenType:"u16"},e=>{rt(o,e)}),o.u64(n.objectId)}var E_="ActiveAbilityNotify";function D_(o,n){let e={};return e.objectId=o.u64(),e.addonSkillFeatureList=o.array(o.u16(),()=>{let _={};return _.addonSkillFeatureIdList=o.array(o.u16(),()=>o.u32(),5),_.skillId=o.u32(),_},200),e}function K_(o,n){o.u64(n.objectId),o.array(n.addonSkillFeatureList,{maxLen:200,lenType:"u16"},e=>{o.array(e.addonSkillFeatureIdList,{maxLen:5,lenType:"u16"},_=>{o.u32(_)}),o.u32(e.skillId)})}var R_="AddonSkillFeatureChangeNotify";function L_(o,n){let e={};return e.paralyzationMaxPoint=o.u32(),e.type=o.u8(),e.objectId=o.u64(),e.paralyzationPoint=o.u32(),e}function A_(o,n){o.u32(n.paralyzationMaxPoint),o.u8(n.type),o.u64(n.objectId),o.u32(n.paralyzationPoint)}var w_="BlockSkillStateNotify";function B_(o,n){let e={};return e.sourceId=o.u64(),e.targetId=o.u64(),e.type=o.u32(),e}function C_(o,n){o.u64(n.sourceId),o.u64(n.targetId),o.u32(n.type)}var M_="CounterAttackNotify";function j_(o,n){let e={};return e.sourceId=o.u64(),e.targetId=o.u64(),n>=4?(e.effectId=o.u32(),e.directionYaw=o.u16(),e.deathType=o.u8(),e.durabilityDecrement=o.u8(),e.abnormalStatusType=o.u8(),e.damageAttr=o.u8(),e.unk0_m=o.u64(),e.unk2_m=o.u32()):(e.effectId=0,e.directionYaw=0,e.deathType=0,e.durabilityDecrement=0,e.abnormalStatusType=0,e.damageAttr=0,e.unk0_m=0n,e.unk2_m=0),e}function F_(o,n){o.u64(n.sourceId),o.u64(n.targetId),o.u32(n.effectId),o.u16(n.directionYaw),o.u8(n.deathType??0),o.u8(n.durabilityDecrement),o.u8(n.abnormalStatusType??0),o.u8(n.damageAttr??0),o.u64(n.unk0_m),o.u32(n.unk2_m)}var g_="DeathNotify";function W_(o,n){let e={};return e.abilityDataList=o.array(o.u16(),()=>M(o,n),100),e}function O_(o,n){o.array(n.abilityDataList,{maxLen:100,lenType:"u16"},e=>{j(o,e)})}var U_="InitAbility";function Z_(o,n){let e={};return e.playerId=o.u64(),e}function q_(o,n){o.u64(n.playerId)}var V_="InitEnv";function v(o,n){let e={};return e.skillLevel=o.u8(),e.occurTime=c(o,n),e.statusEffectId=o.u32(),e.sourceId=o.u64(),e.totalTime=o.f32(),e.endTick=o.u64(),o.bool()&&(e.value=o.bytes(16)),e.effectInstanceId=o.u32(),n>=1?e.stackCount=o.u8():e.stackCount=1,e}function x(o,n){o.u8(n.skillLevel),h(o,n.occurTime),o.u32(n.statusEffectId),o.u64(n.sourceId),o.f32(n.totalTime),o.u64(n.endTick),o.bool(n.value!==void 0)&&o.bytes(n.value,{length:16}),o.u32(n.effectInstanceId),o.u8(n.stackCount)}function H_(o,n){let e={};return e.statPair=o.array(o.u16(),()=>{let _={};return _.StatType=o.u8(),_.Value=r(o,n),_},152),e.name=o.string(20),e.level=o.u16(),e.statusEffectDatas=o.array(o.u16(),()=>v(o,n),80),e.characterId=o.u64(),e.gearLevel=o.f32(),e.playerId=o.u64(),e.classId=o.u16(),e}function z_(o,n){o.array(n.statPair,{maxLen:152,lenType:"u16"},e=>{o.u8(e.statType),d(o,e.value)}),o.string(n.name,20),o.u16(n.level),o.array(n.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{x(o,e)}),o.u64(n.characterId),o.f32(n.gearLevel),o.u64(n.playerId),o.u16(n.classId)}var G_="InitPC";function Y_(o,n){let e={};return e.statPair=o.array(o.u16(),()=>{let _={};return _.statType=o.u8(),_.value=r(o,n),_},152),e.statusEffectDatas=o.array(o.u16(),()=>v(o,n),80),e.addonSkillFeatureList=o.array(o.u16(),()=>{let _={};return _.addonSkillFeatureIdList=o.array(o.u16(),()=>o.u32(),5),_.skillId=o.u32(),_},200),e.abilityDataList=o.array(o.u16(),()=>M(o,n),100),e}function $_(o,n){o.array(n.statPair,{maxLen:152,lenType:"u16"},e=>{o.u8(e.statType),d(o,e.value)}),o.array(n.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{x(o,e)}),o.array(n.addonSkillFeatureList,{maxLen:200,lenType:"u16"},e=>{o.array(e.addonSkillFeatureIdList,{maxLen:5,lenType:"u16"},_=>{o.u32(_)}),o.u32(e.skillId)}),o.array(n.abilityDataList,{maxLen:100,lenType:"u16"},e=>{j(o,e)})}var J_="InitLocal";function Q_(o,n){let e={};return e.account_CharacterId1=o.u64(),e.serverAddr=o.string(256),e.account_CharacterId2=o.u64(),e}function X_(o,n){o.u64(n.account_CharacterId1),o.string(n.serverAddr,256),o.u64(n.account_CharacterId2)}var y_="MigrationExecute";function Qn(o,n){let e={};return e.spawnIndex=o.u32(),e.objectId=o.u64(),o.bool()&&(e.transitIndex=o.u32()),e.position=t(o,n),e.statusEffectDatas=o.array(o.u16(),()=>v(o,n),80),e.directionYaw=m(o,n),e.statPair=o.array(o.u16(),()=>{let _={};return _.statType=o.u8(),_.value=r(o,n),_},152),e.typeId=o.u32(),n>=1?(e.level=o.u16(),o.bool()&&(e.balanceLevel=o.u16())):e.level=0,e}function Xn(o,n){o.u32(n.spawnIndex),o.u64(n.objectId),o.bool(n.transitIndex!==void 0)&&o.u32(n.transitIndex),l(o,n.position),o.array(n.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{x(o,e)}),S(o,n.directionYaw),o.array(n.statPair,{maxLen:152,lenType:"u16"},e=>{o.u8(e.statType),d(o,e.value)}),o.u32(n.typeId),o.u16(n.level),o.bool(n.balanceLevel!==void 0)&&o.u16(n.balanceLevel)}function na(o,n){let e={};return e.npcStruct=Qn(o,n),e}function oa(o,n){Xn(o,n.npcStruct)}var ea="NewNpc";function _a(o,n){let e={};return e.publishReason=o.u8(),e.ownerId=o.u64(),e.npcData=Qn(o,n),e}function aa(o,n){o.u8(n.publishReason),o.u64(n.ownerId),Xn(o,n.npcData)}var ua="NewNpcSummon";function K(o,n){let e={};return e.slot=o.u16(),e.level=o.u16(),e.itemTint=o.bytes(o.u16(),5,14),e.expireTime=c(o),e.id=o.u32(),e}function R(o,n){o.u16(n.slot),o.u16(n.level),o.bytes(n.itemTint,{maxLen:5,lenType:"u16",multiplier:14}),h(o,n.expireTime),o.u32(n.id)}function st(o,n){let e={};return e.maxItemLevel=o.f32(),e.statPair=o.array(o.u16(),()=>{let _={};return _.statType=o.u8(),_.value=r(o,n),_},152),e.name=o.string(20),e.heading=m(o,n),e.characterId=o.u64(),e.playerId=o.u64(),e.addonSkillFeatureList=o.array(o.u16(),()=>{let _={};return _.addonSkillFeatureIdList=o.array(o.u16(),()=>o.u32(),5),_.skillId=o.u32(),_},200),e.classId=o.u16(),e.level=o.u16(),e.statusEffectDatas=o.array(o.u16(),()=>v(o,n),80),n>=1?(e.avgItemLevel=o.f32(),e.position=t(o),e.equipItemDataList=o.array(o.u16(),()=>K(o,n),32),e.equipLifeToolDataList=o.array(o.u16(),()=>K(o,n),9),e.guildName=o.string(20),n>=2?e.guildId=o.u64():e.guildId=BigInt(o.u32())):(e.avgItemLevel=e.maxItemLevel,e.position={x:0,y:0,z:0},e.equipItemDataList=[],e.equipLifeToolDataList=[],e.guildName="",e.guildId=0n),e}function it(o,n){o.f32(n.maxItemLevel),o.array(n.statPair,{maxLen:152,lenType:"u16"},e=>{o.u8(e.statType),d(o,e.value)}),o.string(n.name,20),S(o,n.heading),o.u64(n.characterId),o.u64(n.playerId),o.array(n.addonSkillFeatureList,{maxLen:200,lenType:"u16"},e=>{o.array(e.addonSkillFeatureIdList,{maxLen:5,lenType:"u16"},_=>{o.u32(_)}),o.u32(e.skillId)}),o.u16(n.classId),o.u16(n.level),o.array(n.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{x(o,e)}),o.f32(n.avgItemLevel),l(o,n.position),o.array(n.equipItemDataList,{maxLen:32,lenType:"u16"},e=>{R(o,e)}),o.array(n.equipLifeToolDataList,{maxLen:9,lenType:"u16"},e=>{R(o,e)}),o.string(n.guildName,20),o.u64(n.guildId)}function ta(o,n){let e={};return e.pcStruct=st(o,n),e}function sa(o,n){it(o,n.pcStruct)}var ia="NewPC";function mt(o,n){let e={};return e.tripodIndex=C(o,n),e.chainSkillEffect=o.u32(),e.skillEffect=o.u32(),e.skillId=o.u32(),e.targetObjectId=o.u64(),e.ownerId=o.u64(),e.skillLevel=o.u8(),e.projectileId=o.u64(),e.tripodLevel=B(o,n),e}function dt(o,n){Gn(o,n.tripodIndex),o.u32(n.chainSkillEffect),o.u32(n.skillEffect),o.u32(n.skillId),o.u64(n.targetObjectId),o.u64(n.ownerId),o.u8(n.skillLevel),o.u64(n.projectileId),zn(o,n.tripodLevel)}function ma(o,n){let e={};return e.projectileInfo=mt(o,n),e}function da(o,n){dt(o,n.projectileInfo)}var fa="NewProjectile";function la(o,n){let e={};return e.enable=o.bool(),e.paralyzationPoint=o.u32(),e.decreasePoint=o.u32(),e.paralyzationMaxPoint=o.u32(),e.noHitCheckTime=o.u32(),e.hitCheckTime=o.u32(),e.objectId=o.u64(),e}function ca(o,n){o.bool(n.enable),o.u32(n.paralyzationPoint),o.u32(n.decreasePoint),o.u32(n.paralyzationMaxPoint),o.u32(n.noHitCheckTime),o.u32(n.hitCheckTime),o.u64(n.objectId)}var ka="ParalyzationStateNotify";function ft(o,n){let e={};return e.maxHp=r(o,n),e.characterId=o.u64(),e.position=t(o,n),e.transitIndex=o.u32(),e.curHp=r(o,n),e.characterLevel=o.u16(),e.gearLevel=o.f32(),e.zoneId=o.u32(),e.partyMemberNumber=o.u8(),e.name=o.string(20),e.zoneInstId=o.u64(),e.worldId=o.u8(),e.classId=o.u16(),e.auths=o.u8(),e}function lt(o,n){d(o,n.maxHp),o.u64(n.characterId),l(o,n.position),o.u32(n.transitIndex),d(o,n.curHp),o.u16(n.characterLevel),o.f32(n.gearLevel),o.u32(n.zoneId),o.u8(n.partyMemberNumber),o.string(n.name,20),o.u64(n.zoneInstId),o.u8(n.worldId),o.u16(n.classId),o.u8(n.auths)}function pa(o,n){let e={};return e.raidInstanceId=o.u32(),e.lootGrade=o.u32(),e.partyType=o.u8(),e.partyInstanceId=o.u32(),e.partyLootType=o.u8(),e.memberDatas=o.array(o.u16(),()=>ft(o,n),40),e}function va(o,n){o.u32(n.raidInstanceId),o.u32(n.lootGrade),o.u8(n.partyType),o.u32(n.partyInstanceId),o.u8(n.partyLootType),o.array(n.memberDatas,{maxLen:40,lenType:"u16"},e=>{lt(o,e)})}var xa="PartyInfo";function Ta(o,n){let e={};return e.partyLeaveType=o.u8(),e.partyInstanceId=o.u32(),e.name=o.string(20),e}function Sa(o,n){o.u8(n.partyLeaveType),o.u32(n.partyInstanceId),o.string(n.name,20)}var Pa="PartyLeaveResult";function ba(o,n){let e={};return e.objectId=o.u64(),e.passiveStatusEffectList=o.array(o.u16(),()=>o.u32(),10),e.unk0_m=o.u8(),e}function Na(o,n){o.u64(n.objectId),o.array(n.passiveStatusEffectList,{maxLen:10,lenType:"u16"},e=>{o.u32(e)}),o.u8(n.unk0_m)}var ha="PartyPassiveStatusEffectAddNotify";function Ia(o,n){let e={};return e.objectId=o.u64(),e.passiveStatusEffectList=o.array(o.u16(),()=>o.u32(),10),e}function Ea(o,n){o.u64(n.objectId),o.array(n.passiveStatusEffectList,{maxLen:10,lenType:"u16"},e=>{o.u32(e)})}var Da="PartyPassiveStatusEffectRemoveNotify";function Ka(o,n){let e={};return e.characterId=o.u64(),e.statusEffectDatas=o.array(o.u16(),()=>v(o,n),80),e.playerIdOnRefresh=o.u64(),e}function Ra(o,n){o.u64(n.characterId),o.array(n.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{x(o,e)}),o.u64(n.playerIdOnRefresh)}var La="PartyStatusEffectAddNotify";function Aa(o,n){let e={};return e.characterId=o.u64(),e.statusEffectIds=o.array(o.u16(),()=>o.u32(),80),e.reason=o.u8(),e}function wa(o,n){o.u64(n.characterId),o.array(n.statusEffectIds,{maxLen:80,lenType:"u16"},e=>{o.u32(e)}),o.u8(n.reason)}var Ba="PartyStatusEffectRemoveNotify";function Ca(o,n){let e={};return e.partyInstanceId=o.u32(),e.raidInstanceId=o.u32(),e.characterId=o.u64(),e}function Ma(o,n){o.u32(n.partyInstanceId),o.u32(n.raidInstanceId),o.u64(n.characterId)}var ja="PartyStatusEffectResultNotify";function Fa(o,n){let e={};return e.passiveStatusEffectList=o.array(o.u16(),()=>o.u32(),10),e}function ga(o,n){o.array(n.passiveStatusEffectList,{maxLen:10,lenType:"u16"},e=>{o.u32(e)})}var Wa="PassiveStatusEffectAddNotify";function Oa(o,n){let e={};return e.passiveStatusEffectList=o.array(o.u16(),()=>o.u32(),10),e}function Ua(o,n){o.array(n.passiveStatusEffectList,{maxLen:10,lenType:"u16"},e=>{o.u32(e)})}var Za="PassiveStatusEffectRemoveNotify";function qa(o,n){let e={};return n>=4?e.typeId=o.u32():e.typeId=0,e}function Va(o,n){o.u32(n.typeId)}var Ha="RaidBossKillNotify";function za(o,n){let e={};return n>=3?e.raidResult=o.u8():e.raidResult=0,e}function Ga(o,n){o.u8(n.raidResult)}var Ya="RaidResult";function ct(o,n){let e={};return e.unpublishReason=o.u8(),e.objectId=o.u64(),e}function kt(o,n){o.u8(n.unpublishReason),o.u64(n.objectId)}function $a(o,n){let e={};return e.unpublishedObjects=o.array(o.u16(),()=>ct(o,n),200),e}function Ja(o,n){o.array(n.unpublishedObjects,{maxLen:200,lenType:"u16"},e=>{kt(o,e)})}var Qa="RemoveObject";function yn(o,n){let e={};return e.modifier=o.u8(),e.targetId=o.u64(),e.damageType=o.u8(),o.bool()&&(e.damageAttr=o.u8()),e.curHp=r(o,n),e.unk3_m=o.u16(),e.maxHp=r(o,n),e.damage=r(o,n),e}function no(o,n){o.u8(n.modifier),o.u64(n.targetId),o.u8(n.damageType),o.bool(n.damageAttr!==void 0)&&o.u8(n.damageAttr),d(o,n.curHp),o.u16(n.unk3_m),d(o,n.maxHp),d(o,n.damage)}function vt(o,n){let e={};return e.skillMoveOptionData=Yn(o,n),e.destination=t(o,n),e.position=t(o,n),e.skillDamageEvent=yn(o,n),e}function xt(o,n){Jr(o,n.skillMoveOptionData),l(o,n.destination),l(o,n.position),no(o,n.skillDamageEvent)}function Xa(o,n){let e={};return e.skillId=o.u32(),e.skillDamageAbnormalMoveEvents=o.array(o.u16(),()=>vt(o,n),50),e.skillEffectId=o.u32(),e.sourceId=o.u64(),e}function ya(o,n){o.u32(n.skillId),o.array(n.skillDamageAbnormalMoveEvents,{maxLen:50,lenType:"u16"},e=>{xt(o,e)}),o.u32(n.skillEffectId),o.u64(n.sourceId)}var nu="SkillDamageAbnormalMoveNotify";function ou(o,n){let e={};return e.skillLevel=o.u8(),e.sourceId=o.u64(),e.skillId=o.u32(),e.skillDamageEvents=o.array(o.u16(),()=>yn(o,n),50),e.skillEffectId=o.u32(),e}function eu(o,n){o.u8(n.skillLevel),o.u64(n.sourceId),o.u32(n.skillId),o.array(n.skillDamageEvents,{maxLen:50,lenType:"u16"},e=>{no(o,e)}),o.u32(n.skillEffectId??0)}var _u="SkillDamageNotify";function au(o,n){let e={};return e.sourceId=o.u64(),e.skillId=o.u32(),e.stage=o.u8(),e}function uu(o,n){o.u64(n.sourceId),o.u32(n.skillId),o.u8(n.stage)}var ru="SkillStageNotify";function tu(o,n){let e={};return e.sourceId=o.u64(),e.curDirectionYaw=m(o,n),e.newDirectionYaw=m(o,n),e.aimTargetPosition=t(o,n),o.bool()&&(e.pitchRotation=m(o,n)),o.bool()&&(e.aiStateId=o.u32()),e.curPosition=t(o,n),o.bool()&&(e.unk1_m=o.u32()),e.skillLevel=o.u8(),e.newPosition=t(o,n),e.skillId=o.u32(),e.skillOptionData=Jn(o,n),e}function su(o,n){o.u64(n.sourceId),S(o,n.curDirectionYaw),S(o,n.newDirectionYaw),l(o,n.aimTargetPosition),o.bool(n.pitchRotation!==void 0)&&S(o,n.pitchRotation),o.bool(n.aiStateId!==void 0)&&o.u32(n.aiStateId),l(o,n.curPosition),o.bool(n.unk1_m!==void 0)&&o.u32(n.unk1_m),o.u8(n.skillLevel),l(o,n.newPosition),o.u32(n.skillId),nt(o,n.skillOptionData)}var iu="SkillStartNotify";function mu(o,n){let e={};return e.statusEffectData=v(o,n),e.objectId=o.u64(),e.new=o.bool(),e}function du(o,n){x(o,n.statusEffectData),o.u64(n.objectId),o.bool(n.new)}var fu="StatusEffectAddNotify";function lu(o,n){let e={};return e.statusEffectIds=o.array(o.u16(),()=>o.u32(),80),e.objectId=o.u64(),e.reason=o.u8(),e}function cu(o,n){o.array(n.statusEffectIds,{maxLen:80,lenType:"u16"},e=>{o.u32(e)}),o.u64(n.objectId),o.u8(n.reason)}var ku="StatusEffectRemoveNotify";function pu(o,n){let e={};return e.effectInstanceId=o.u32(),e.targetId=o.u64(),e.expirationTick=o.u64(),e}function vu(o,n){o.u32(n.effectInstanceId),o.u64(n.targetId),o.u64(n.expirationTick)}var xu="StatusEffectDurationNotify";function Tu(o,n){let e={};return e.objectId=o.u64(),e.effectInstanceId=o.u32(),e.characterId=o.u64(),e.value=o.u32(),e}function Su(o,n){o.u64(n.objectId),o.u32(n.effectInstanceId),o.u64(n.characterId),o.u32(n.value)}var Pu="StatusEffectSyncDataNotify";function bu(o,n){let e={};return e.step=o.u32(),e.unk2_m=o.bool(),e.triggerId=o.u32(),e}function Nu(o,n){o.u32(n.step),o.bool(n.unk2_m),o.u32(n.triggerId)}var hu="TriggerBossBattleStatus";function Iu(o,n){let e={};return e.packetResultCode=o.u32(),e.triggerId=o.u32(),e.unk0_m=o.u32(),e.involvedPCs=o.array(o.u16(),()=>o.u64(),40),e}function Eu(o,n){o.u32(n.packetResultCode),o.u32(n.triggerId),o.u32(n.unk0_m),o.array(n.involvedPCs,{maxLen:40,lenType:"u16"},e=>{o.u64(e)})}var Du="TriggerFinishNotify";function Ku(o,n){let e={};return e.triggerId=o.u32(),e.triggerSignalType=o.u32(),e.sourceId=o.u64(),e.involvedPCs=o.array(o.u16(),()=>o.u64(),40),e}function Ru(o,n){o.u32(n.triggerId),o.u32(n.triggerSignalType),o.u64(n.sourceId),o.array(n.involvedPCs,{maxLen:40,lenType:"u16"},e=>{o.u64(e)})}var Lu="TriggerStartNotify";function Au(o,n){let e={};return e.maxHp=r(o,n),e.characterId=o.u64(),e.unk0_m=o.u32(),e.statusEffectDatas=o.array(o.u16(),()=>v(o,n),80),e.position=o.u64(),e.curHp=r(o,n),e}function wu(o,n){d(o,n.maxHp),o.u64(n.characterId),o.u32(n.unk0_m),o.array(n.statusEffectDatas,{maxLen:80,lenType:"u16"},e=>{x(o,e)}),o.u64(n.position),d(o,n.curHp)}var Bu="TroopMemberUpdateMinNotify";function Cu(o,n){let e={};return e.identityGauge1=o.u32(),e.identityGauge2=o.u32(),e.identityGauge3=o.u32(),e.playerId=o.u64(),e}function Mu(o,n){o.u32(n.identityGauge1),o.u32(n.identityGauge2),o.u32(n.identityGauge3),o.u64(n.playerId)}var ju="IdentityGaugeChangeNotify";function Fu(o,n){let e={};return e.objectId=o.u64(),e}function gu(o,n){o.u64(n.objectId)}var Wu="ZoneObjectUnpublishNotify";function Tt(o,n){let e={};return e.stackCount=o.u8(),e.target=o.u8(),e.id=o.u32(),e}function St(o,n){o.u8(n.stackCount),o.u8(n.target),o.u32(n.id)}function Ou(o,n){let e={};return e.zoneStatusEffectDataList=o.array(o.u16(),()=>Tt(o,n),4),e}function Uu(o,n){o.array(n.zoneStatusEffectDataList,{maxLen:4,lenType:"u16"},e=>{St(o,e)})}var Zu="ZoneStatusEffectAddNotify";function qu(o,n){let e={};return e.statusEffectId=o.u32(),e}function Vu(o,n){o.u32(n.statusEffectId)}var Hu="ZoneStatusEffectRemoveNotify";function zu(o,n){let e={};return e.skillLevel=o.u8(),e.caster=o.u64(),e.skillId=o.u32(),e}function Gu(o,n){o.u8(n.skillLevel),o.u64(n.caster),o.u32(n.skillId)}var Yu="SkillCastNotify";function $u(o,n){let e={};return e.objectId=o.u64(),e.stance=o.u8(),e}function Ju(o,n){o.u64(n.objectId),o.u8(n.stance)}var Qu="IdentityStanceChangeNotify";function Xu(o,n){let e={};return e.objectId=o.u64(),e.equipItemDataList=o.array(o.u16(),()=>K(o,n),32),e}function yu(o,n){o.u64(n.objectId),o.array(n.equipItemDataList,{maxLen:32,lenType:"u16"},e=>{R(o,e)})}var nr="EquipChangeNotify";function or(o,n){let e={};return e.objectId=o.u64(),e.equipLifeToolDataList=o.array(o.u16(),()=>K(o,n),9),e}function er(o,n){o.u64(n.objectId),o.array(n.equipLifeToolDataList,{maxLen:9,lenType:"u16"},e=>{R(o,e)})}var _r="EquipLifeToolChangeNotify";function Pt(o,n){let e={};return o.bool()&&(e.serialNumber=o.u64(),e.id=o.u32(),e.level=o.u16(),e.slot=o.u16(),e.durability=o.u32(),e.unk1_6_m=o.u32(),e.flag=o.u32(),e.expireTime=c(o),e.lockUpdateTime=c(o)),e}function bt(o,n){o.bool(n.slot!==void 0)&&(o.u64(n.serialNumber),o.u32(n.id),o.u16(n.level),o.u16(n.slot),o.u32(n.durability),o.u32(n.unk1_6_m),o.u32(n.flag),h(o,n.expireTime),h(o,n.lockUpdateTime))}function ar(o,n){let e={};return e.itemDataList=o.array(o.u16(),()=>Pt(o,n),80),e.storageType=o.u8(),e}function ur(o,n){o.array([1,20].includes(n.storageType)?n.itemDataList:[],{maxLen:80,lenType:"u16"},e=>{bt(o,e)}),o.u8(n.storageType)}var rr="InitItem";function Nt(o,n){let e={};return e.npcId=o.u32(),e.isDead=o.bool(),e}function ht(o,n){o.u32(n.npcId),o.bool(n.isDead)}function tr(o,n){let e={};return e.raidResult=o.u8(),e.raidId=o.u32(),e.totalTime=o.u64(),e.bossKillDataList=o.array(o.u16(),()=>Nt(o,n),3),e.endTick=o.u64(),e.startTick=o.u64(),e}function sr(o,n){o.u8(n.raidResult),o.u32(n.raidId),o.u64(n.totalTime),o.array(n.bossKillDataList,{maxLen:3,lenType:"u16"},e=>{ht(o,e)}),o.u64(n.endTick),o.u64(n.startTick)}var ir="RaidBegin";function mr(o,n){let e={};return e.zoneInstId=o.u64(),e.zoneId=o.u32(),e.loadComplete=o.bool(),e.completeMembers=o.array(o.u16(),()=>o.u64(),40),e.totalMembers=o.array(o.u16(),()=>o.u64(),40),e.firstPCEnterTick=o.u64(),e.zoneLevel=o.u8(),e}function dr(o,n){o.u64(n.zoneInstId),o.u32(n.zoneId),o.bool(n.loadComplete),o.array(n.completeMembers,{maxLen:40,lenType:"u16"},e=>{o.u64(e)}),o.array(n.totalMembers,{maxLen:40,lenType:"u16"},e=>{o.u64(e)}),o.u64(n.firstPCEnterTick),o.u8(n.zoneLevel)}var fr="ZoneMemberLoadStatusNotify";function It(o,n){let e={};return e.position=t(o),e.objectId=o.u64(),e.ownerId=o.u64(),e.skillId=o.u32(),e.skillEffect=o.u32(),e}function Et(o,n){l(o,n.position),o.u64(n.objectId),o.u64(n.ownerId),o.u32(n.skillId),o.u32(n.skillEffect)}function lr(o,n){let e={};return e.trapData=It(o,n),e}function cr(o,n){Et(o,n.trapData)}var kr="NewTrap";function pr(o,n){let e={};return e.skillId=o.u32(),e.caster=o.u64(),e.newDirectionYaw=m(o),e.cancelReason=o.u8(),e.newPosition=t(o),e}function vr(o,n){o.u32(n.skillId),o.u64(n.caster),S(o,n.newDirectionYaw),o.u8(n.cancelReason),l(o,n.newPosition)}var xr="SkillCancelNotify";function Tr(o,n){let e={};return e.players=o.array(o.u8(),()=>{let _={};return _.name=o.string(20),_.stats=o.array(o.u8(),()=>{let u={};return u.id=o.u8(),u.value=o.u32(),u},100),n>=4&&(_.elixirs=o.array(o.u8(),()=>{let u={};return u.slot=o.u8(),u.entries=o.array(o.u8(),()=>{let s={};return s.level=o.u8(),s.id=o.u32(),s}),u},32)),n>=5&&(_.gems=o.array(o.u8(),()=>{let u={};u.id=o.u32(),u.skillId=o.u32(),u.type=o.u8(),u.value=o.u16()})),_},24),e}function Sr(o,n){o.array(n.players,{maxLen:24,lenType:"u8"},e=>{o.string(e.name,20),o.array(e.stats,{maxLen:100,lenType:"u8"},_=>{o.u8(_.id),o.u32(_.value)}),o.array(e.elixirs,{maxLen:32,lenType:"u8"},_=>{o.u8(_.slot),o.array(_.entries,{maxLen:5,lenType:"u8"},u=>{o.u8(u.level),o.u32(u.id)})}),o.array(e.gems,{maxLen:20,lenType:"u8"},_=>{o.u32(_.id),o.u32(_.skillId),o.u8(_.type),o.u16(_.value)})})}var Pr="APP_StatApi";var br=new Map([[0,[N_,P_,b_]],[1,[E_,h_,I_]],[2,[R_,D_,K_]],[4,[w_,L_,A_]],[5,[M_,B_,C_]],[6,[g_,j_,F_]],[7,[U_,W_,O_]],[8,[V_,Z_,q_]],[9,[G_,H_,z_]],[10,[J_,Y_,$_]],[11,[y_,Q_,X_]],[12,[ea,na,oa]],[13,[ua,_a,aa]],[14,[ia,ta,sa]],[15,[fa,ma,da]],[16,[ka,la,ca]],[17,[xa,pa,va]],[18,[Pa,Ta,Sa]],[19,[ha,ba,Na]],[20,[Da,Ia,Ea]],[21,[La,Ka,Ra]],[22,[Ba,Aa,wa]],[23,[ja,Ca,Ma]],[24,[Wa,Fa,ga]],[25,[Za,Oa,Ua]],[26,[Ha,qa,Va]],[27,[Ya,za,Ga]],[28,[Qa,$a,Ja]],[29,[nu,Xa,ya]],[30,[_u,ou,eu]],[31,[ru,au,uu]],[32,[iu,tu,su]],[34,[fu,mu,du]],[35,[ku,lu,cu]],[36,[xu,pu,vu]],[37,[Pu,Tu,Su]],[38,[hu,bu,Nu]],[39,[Du,Iu,Eu]],[40,[Lu,Ku,Ru]],[41,[Bu,Au,wu]],[42,[ju,Cu,Mu]],[43,[Wu,Fu,gu]],[44,[Zu,Ou,Uu]],[45,[Hu,qu,Vu]],[46,[Yu,zu,Gu]],[47,[Qu,$u,Ju]],[48,[nr,Xu,yu]],[49,[_r,or,er]],[50,[rr,ar,ur]],[52,[ir,tr,sr]],[51,[fr,mr,dr]],[53,[kr,lr,cr]],[54,[xr,pr,vr]],[6e4,[Pr,Tr,Sr]]]);var Ds=require("tiny-typed-emitter");var oo=class{#o;#n;#e;#_;#a;#u;constructor(n,e,_,u,s,i){this.#o=n,this.#n=e,this.#e=_,this.#_=u,this.#a=s,this.#u=i}#r;get parsed(){if(!this.#r)try{this.#r=this.#u(this.#a.decrypt(this.#o,this.#n,this.#e,this.#_))}catch(n){console.error(`[meter-core/pkt-stream] - ${n}`);return}return this.#r}};var gn=class{time;#o;#n;#e;#_;constructor(...n){if(n.length===5){let[e,_,u,s,i]=n;this.#n=e,this.time=u,this.#o=_,this.#e=s,this.#_=i}else if(n.length===3){let[e,_,u]=n;this.#n=Buffer.alloc(0),this.time=new Date,this.#o=_,this.#e=()=>e,this.#_=u}else throw new Error("[meter-core/logger/parser] - LogEvent<T>: Invalid constructor arguments")}#a;get parsed(){if(!this.#a)try{this.#a=this.#e(new a(this.#n))}catch(n){console.error(`[meter-core/logger/parser] - parsed - ${n}`);return}return this.#a}#u;get serialized(){if(!this.#u)try{if(!this.parsed)return;let n=new Zn;n.skip(hr),this.#_(n,this.parsed);let e=n.value;e.writeUint16LE(e.length,Kt),e.writeUint16LE(this.#o,_o),e.writeUintLE(+new Date,Nr,ao),this.#u=n.value}catch(n){console.error(`[meter-core/logger/parser] - serialized - ${n}`);return}return this.#u}},Wn=6,Dt=2,Kt=0,eo=2,_o=Kt+Dt,ao=6,Nr=_o+eo,hr=Dt+eo+ao;var At=require("fs");var uo=class{buffer;position;out;constructor(){this.buffer=null,this.position=0,this.out=[]}write(n){for(;n.length>0;){if(this.buffer){if(this.buffer.length<2){let u=this.buffer[0],s=(n[0]<<8)+u;this.buffer=Buffer.alloc(s),this.buffer[0]=u,this.position=1}let _=Math.min(n.length,this.buffer.length-this.position);n.copy(this.buffer,this.position,0,_),this.position+=_,this.position===this.buffer.length&&(this.out.push(this.buffer),this.buffer=null,this.position=0),n=n.subarray(_);continue}if(n.length<2){this.buffer=Buffer.from(n),this.position=n.length;break}let e=n.readUInt16LE(0);if(e===0){this.buffer=null;return}if(e>n.length){this.buffer=Buffer.alloc(e),n.copy(this.buffer),this.position=n.length;break}this.out.push(n.subarray(0,e)),n=n.subarray(e)}}read(){return this.out.shift()}};var wt=require("fs");var On=class extends Lt.TypedEmitter{},Ir=class extends On{#o;#n;constructor(n,e,_){super(),this.#o=e,_&&(this.#n=(0,At.createWriteStream)(_,{highWaterMark:0}));let u=Buffer.allocUnsafe(Wn);u.writeUIntLE(5,0,Wn),this.#n?.write(u),n.on("*",this.handlePkt.bind(this))}handlePkt(n,e,_,u){try{let s=T_.get(e),i=at.get(e);if(s&&i){let[T]=i,[L,N]=s,F=br.get(T);if(F){let[Un,Rs,Bt]=F,Dr=new oo(Buffer.from(n),e,_,!!u,this.#o,N).parsed;if(!Dr)return;let ro=new gn(Dr,T,Bt);this.emit(Un,ro),this.emit("*",Un,ro),this.appendLog(ro)}}}catch(s){console.error(s)}}appendLog(n){this.#n&&n.serialized&&this.#n.write(n.serialized)}},Er=class extends On{readLogByChunk(n){let e=new uo,_=(0,wt.createReadStream)(n),u=!1,s;_.on("data",i=>{if(s===void 0){if(s=this.readVersion(i),s>5){_.destroy();return}i=i.subarray(Wn)}e.write(i);let T;for(;T=e.read();)this.readLogChunk(T,s)}).on("end",()=>{u=!0,this.emit("fileEnd","end")}).on("close",()=>{u||this.emit("fileEnd","closed")})}readLogChunk(n,e){try{if(n.length<8)return!1;let _=n.readUIntLE(_o,eo),u=new Date(n.readUintLE(Nr,ao)),s=n.subarray(hr),i=br.get(_);if(i){let[T,L,N]=i,F=new gn(s,_,new Date(u),Un=>L(Un,e),N);this.emit(T,F),this.emit("*",T,F)}}catch(_){console.error(_)}}readVersion(n){return n.readUintLE(0,Wn)}};0&&(module.exports={LiveLogger,Logger,ReplayLogger});
